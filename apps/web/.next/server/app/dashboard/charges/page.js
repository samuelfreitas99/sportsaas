(()=>{var e={};e.id=144,e.ids=[144],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5380:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=t(482),a=t(9108),i=t(2563),n=t.n(i),o=t(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let c=["",{children:["dashboard",{children:["charges",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2392)),"C:\\Users\\Samuel F\\Documents\\projetos\\sportsaas\\apps\\web\\app\\dashboard\\charges\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2917)),"C:\\Users\\Samuel F\\Documents\\projetos\\sportsaas\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Samuel F\\Documents\\projetos\\sportsaas\\apps\\web\\app\\dashboard\\charges\\page.tsx"],u="/dashboard/charges/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/charges/page",pathname:"/dashboard/charges",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2025:(e,s,t)=>{Promise.resolve().then(t.bind(t,5913))},7174:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},7604:()=>{},5913:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(2295),a=t(3729),i=t(8117);function n(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)([]),[u,p]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[h,g]=(0,a.useState)("");(0,a.useEffect)(()=>{s(null)},[]);let b=(0,a.useMemo)(()=>{let e=new URLSearchParams;u.trim()&&e.set("cycle_key",u.trim()),h.trim()&&e.set("member_id",h.trim()),m&&e.set("status",m);let s=e.toString();return s?`?${s}`:""},[u,h,m]),j=async e=>{l(null);try{let s=await i.Z.get(`/orgs/${e}/charges${b}`);d(s.data)}catch(e){console.error(e),d([]),l("Falha ao carregar charges (verifique permiss\xf5es).")}finally{n(!1)}};(0,a.useEffect)(()=>{if(!e){n(!1);return}j(e)},[e]);let v=async()=>{e&&(n(!0),await j(e))},y=async(s,t)=>{if(e){l(null);try{await i.Z.patch(`/orgs/${e}/charges/${s}`,{status:t}),await j(e)}catch(e){console.error(e),l("Falha ao atualizar charge.")}}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Charges"}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Org: ",r.jsx("span",{className:"font-mono",children:e??"-"})]})]}),!e&&r.jsx("div",{className:"bg-white p-6 rounded shadow",children:r.jsx("p",{className:"text-gray-700",children:"Selecione uma organiza\xe7\xe3o no Dashboard primeiro."})}),e&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded shadow",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filtros"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[r.jsx("input",{className:"border p-2 rounded",placeholder:"cycle_key",value:u,onChange:e=>p(e.target.value)}),r.jsx("input",{className:"border p-2 rounded",placeholder:"member_id",value:h,onChange:e=>g(e.target.value)}),(0,r.jsxs)("select",{className:"border p-2 rounded",value:m,onChange:e=>x(e.target.value),children:[r.jsx("option",{value:"",children:"ALL"}),r.jsx("option",{value:"PENDING",children:"PENDING"}),r.jsx("option",{value:"PAID",children:"PAID"}),r.jsx("option",{value:"VOID",children:"VOID"})]}),r.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:v,children:"Aplicar"})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Lista"}),r.jsx("button",{className:"text-sm px-3 py-1 border rounded hover:bg-gray-50",onClick:()=>j(e),disabled:t,children:"Recarregar"})]}),o&&r.jsx("div",{className:"mb-3 text-sm text-red-600",children:o}),t?r.jsx("div",{className:"text-gray-500",children:"Carregando..."}):(0,r.jsxs)("div",{className:"space-y-2",children:[c.map(e=>(0,r.jsxs)("div",{className:"border rounded p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-semibold truncate",children:e.org_member.user.full_name||e.org_member.user.email}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 truncate",children:[e.cycle_key," • ",e.type," • ",e.status]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 truncate font-mono",children:["member: ",e.org_member_id]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between md:justify-end gap-3",children:[(0,r.jsxs)("div",{className:"font-bold",children:["$",e.amount]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white disabled:opacity-60",disabled:"PENDING"!==e.status,onClick:()=>y(e.id,"PAID"),children:"Marcar PAID"}),r.jsx("button",{className:"px-3 py-2 rounded bg-gray-700 text-white disabled:opacity-60",disabled:"PENDING"!==e.status,onClick:()=>y(e.id,"VOID"),children:"VOID"})]})]})]},e.id)),0===c.length&&r.jsx("div",{className:"text-gray-500",children:"Nenhuma charge encontrada."})]})]})]})]})}},8117:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let r=t(1934).Z.create({baseURL:process.env.NEXT_PUBLIC_API_URL??"http://localhost:8000/api/v1"});r.interceptors.request.use(e=>e),r.interceptors.response.use(e=>e,e=>(e?.response?.status,Promise.reject(e)));let a=r},2392:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,t(6843).createProxy)(String.raw`C:\Users\Samuel F\Documents\projetos\sportsaas\apps\web\app\dashboard\charges\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},2917:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,metadata:()=>n});var r=t(5036),a=t(265),i=t.n(a);t(7272);let n={title:"Sport SaaS",description:"Manage your sports organization"};function o({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:e})})}},7272:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[869,192],()=>t(5380));module.exports=r})();