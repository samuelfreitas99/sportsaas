(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{1254:function(e,l,a){Promise.resolve().then(a.bind(a,3364))},3364:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return n}});var t=a(7437),r=a(2265),s=a(826);function n(){let[e,l]=(0,r.useState)(null),[a,n]=(0,r.useState)({full_name:"",avatar_url:"",phone:""}),[u,o]=(0,r.useState)(!0),[i,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(null),[h,v]=(0,r.useState)(null),x=async()=>{m(null),v(null);try{var e,a,t;let r=(await s.Z.get("/users/me")).data;l(r),n({full_name:null!==(e=r.full_name)&&void 0!==e?e:"",avatar_url:null!==(a=r.avatar_url)&&void 0!==a?a:"",phone:null!==(t=r.phone)&&void 0!==t?t:""})}catch(e){console.error(e),m("Falha ao carregar perfil."),l(null)}finally{o(!1)}};(0,r.useEffect)(()=>{x()},[]);let b=(0,r.useMemo)(()=>!i&&!!e,[i,e]),p=async()=>{if(b){c(!0),m(null),v(null);try{let e={full_name:a.full_name||null,avatar_url:a.avatar_url||null,phone:a.phone||null},t=(await s.Z.put("/users/me",e)).data;l(t),v("Salvo.")}catch(e){console.error(e),m("Falha ao salvar perfil.")}finally{c(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Perfil"}),(0,t.jsx)("button",{className:"text-sm px-3 py-1 border rounded hover:bg-gray-50",onClick:x,disabled:u,children:"Recarregar"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded shadow max-w-2xl",children:[d&&(0,t.jsx)("div",{className:"mb-3 text-sm text-red-600",children:d}),h&&(0,t.jsx)("div",{className:"mb-3 text-sm text-green-700",children:h}),u?(0,t.jsx)("div",{className:"text-gray-500",children:"Carregando..."}):e?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Email"}),(0,t.jsx)("input",{className:"w-full border p-2 rounded bg-gray-50",value:e.email,readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Full Name"}),(0,t.jsx)("input",{className:"w-full border p-2 rounded",value:a.full_name,onChange:e=>n({...a,full_name:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Avatar URL"}),(0,t.jsx)("input",{className:"w-full border p-2 rounded",value:a.avatar_url,onChange:e=>n({...a,avatar_url:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Phone"}),(0,t.jsx)("input",{className:"w-full border p-2 rounded",value:a.phone,onChange:e=>n({...a,phone:e.target.value})})]}),(0,t.jsx)("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",onClick:p,disabled:!b,children:"Salvar"})]}):(0,t.jsx)("div",{className:"text-gray-500",children:"Sem dados."})]})]})}},826:function(e,l,a){"use strict";var t,r=a(4829),s=a(2601);let n=r.Z.create({baseURL:null!==(t=s.env.NEXT_PUBLIC_API_URL)&&void 0!==t?t:"http://localhost:8000/api/v1"});n.interceptors.request.use(e=>{{let l=localStorage.getItem("token");l&&(e.headers.Authorization="Bearer ".concat(l))}return e}),n.interceptors.response.use(e=>e,e=>{var l;return 401===(null==e?void 0:null===(l=e.response)||void 0===l?void 0:l.status)&&(localStorage.removeItem("token"),localStorage.removeItem("currentOrgId"),window.location.href="/login"),Promise.reject(e)}),l.Z=n}},function(e){e.O(0,[737,971,938,744],function(){return e(e.s=1254)}),_N_E=e.O()}]);